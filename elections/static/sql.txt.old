drop table votes;
drop table candidates;
drop table legalVoters;
drop table election;

create table election (
id serial,
name char(50) not null,
info text,
url char(100),
start_date timestamp not null,
end_date timestamp not null,
max_seats integer not null,
-- NEW COL - Hold elections that allow multiple votes per user
votes_per_user integer not null,
-- NEW COL - Show results during a running election
public_results integer not null,
primary key (id)
);

create table legalVoters (
election_id integer references election(id),
-- This references cvsacct(project_group(id))
group_id integer,
primary key (election_id, group_id)
);

create table candidates (
id serial,
election_id integer references election(id),
name char(50),
blurb text,
unique(id),
primary key (id, election_id)
);

create table votes (
id serial,
-- voter_id will refer to someones fas ID
voter_id integer ,
candidate_id integer references candidates(id),
-- election_id integer references candidates(election_id),
-- unique(voter_id, candidate_id, election_id),
-- foreign key (candidate_id, election_id) references candidates(id, election_id),
primary key (id, voter_id, candidate_id)
);
